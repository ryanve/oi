<!doctype html>
<html>
<head>
    <meta charset=utf-8>
    <title>oi :: test suite</title>
    <meta name=viewport content="width=device-width,initial-scale=1.0">
    <meta name=author content="Ryan Van Etten">
    <style>
        body{ 
             font:normal 100% sans-serif; 
             width:94%; max-width:1280px;
             margin: 0 auto; padding:20px 3%; 
             background:#eed; color:#133;
        }
        #test{background:#8d2;max-width:100%;padding:3em;margin:1em 0}
        [accesskey]:hover{cursor:pointer}
    </style>
    <script src="oi.js"></script><!-- github.com/ryanve/oi  -->
    <script>
    (function (document, console, oi) {

        var log = console && console.log ? function (s) {
                console.log(s);
            } : function (s, force) { 
                force && alert(s); 
            };
        
        log ( oi );
        log ( oi.bridge({ fn: {} }) );
        log ( oi.domReady === oi.fn.ready );
        
        (oi.domReady.remix(log, 47))(function (o, n) {
            log( o === log && document === this && n === 47 && 2 == arguments.length );
        });
        
        (oi.domReady.relay(null, 88))(function (o, u) {
            log( void 0 === o && o === u && 1 == arguments.length );
        });

        oi.domReady(function (u) {
            var e = this.getElementById('test')
              , i = 3, handler;

            e.innerHTML = (e && e.nodeType 
                ? "Oi! =) The DOM is ready. Now click this div. " 
                : "Bugger =( oi.domReady did not work properly." );
        
            oi.addEvent(e, 'click', (handler = function () {
                e.innerHTML += ' //// ' + e.tagName.toLowerCase() + " was clicked."
                if ( !i-- ) {
                    oi.removeEvent(e, 'click', handler);
                    e.innerHTML = 'Event removed. Next click should do nothing. All tests passed!';
                    e.removeAttribute('accesskey');
                }
            }));
        });
    
    }(document, this.console, this.oi));
    </script>
</head>
<body>
    <div id="test" accesskey="3"></div>
</body>
</html> 